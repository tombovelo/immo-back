# ===============================
# SERVER CONFIGURATION
# ===============================
server.port=${PORT:8080}

# ===============================
# DATABASE CONFIGURATION (Variables d'environnement)
# ===============================
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/dbimmobilier}
spring.datasource.username=${DATABASE_USERNAME:tombovelo}
spring.datasource.password=${DATABASE_PASSWORD:tombovelo}
spring.datasource.driver-class-name=org.postgresql.Driver

# ===============================
# HIKARI POOL - CONFIGURATION DIRECTE
# ===============================
spring.datasource.hikari.pool-name=HikariPool-Immobilier-Render
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.leak-detection-threshold=30000
spring.datasource.hikari.data-source-properties.prepareThreshold=0

# ===============================
# HIBERNATE - CONFIGURATION SIMPLIFIÉE
# ===============================
spring.jpa.database=postgresql
spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ===============================
# CLOUDINARY (Variables d'environnement)
# ===============================
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}
cloudinary.base-folder=immobilier

# ===============================
# MULTIPART / UPLOAD FILES
# ===============================
# Taille maximale d'un seul fichier
spring.servlet.multipart.max-file-size=5MB
 # Taille maximale de la requête (plusieurs fichiers + champs)
spring.servlet.multipart.max-request-size=20MB

# ===============================
# SWAGGER-UI CUSTOM PATH
# ===============================
springdoc.swagger-ui.path=/swagger-ui
springdoc.api-docs.path=/api-docs

# ===============================
# JWT CONFIGURATION (Variables d'environnement)
# ===============================
app.secret-key=${JWT_SECRET_KEY}
# delai d'expiration du token en millisecondes (24h par défaut)
app.expiration-time=86400000 
# autoriser un décalage d'horloge de 5 minutes
app.clock-skew-seconds=300

# ===============================
# SPRING BOOT ACTUATOR CONFIG
# ===============================
# Active les endpoints health et info
management.endpoints.web.exposure.include=health,info
# Affiche les détails du health check (important pour UptimeRobot)
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
# Custom health check path (optionnel)
management.endpoints.web.base-path=/manage
